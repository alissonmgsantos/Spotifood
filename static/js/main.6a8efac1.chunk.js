(this.webpackJsonpspotifood=this.webpackJsonpspotifood||[]).push([[0],{107:function(e,t,a){e.exports=a(139)},112:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),l=(a(112),a(52)),i=a(34),s=a(95),u=a(87),m={playlist:{index:{REQUEST:"PLAYLIST_INDEX_REQUEST",SUCCESS:"PLAYLIST_INDEX_SUCCESS"},FAILURE:"PLAYLIST_FAILURE"}},p={data:[],loading:!1,success:!1,pagination:{offset:1,limit:6,total:0}};var f=Object(i.c)({playlist:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;return Object(u.a)(e,(function(a){switch(t.type){case m.playlist.index.REQUEST:a.loading=!0;break;case m.playlist.index.SUCCESS:var n=t.payload.playlists,r=n.offset,c=n.limit,o=n.total;a.data=t.payload.playlists.items,a.pagination={offset:r,limit:c,total:o},a.loading=!1,a.success=!0;break;case m.playlist.FAILURE:a.loading=!1;break;default:return e}}))}}),d=a(20),E=a.n(d),b=a(45),g=a(56),y=a(70),h=a.n(y),v="AUTH_SPOTIFOOD",j=function(){return localStorage.getItem(v)?"Bearer ".concat(JSON.parse(localStorage.getItem(v)).access_token):null},O=h.a.create({baseURL:"http://www.mocky.io/v2",headers:{"Content-Type":"application/json",Accept:"application/json"}}),x=h.a.create({baseURL:"https://api.spotify.com",headers:{Accept:"application/json","Content-Type":"application/json"}});x.interceptors.request.use(function(){var e=Object(g.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=j())&&(t.headers.Authorization="".concat(a)),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var S=E.a.mark(I),w=E.a.mark(k);function I(e){var t,a;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,n.next=4,x.get("/v1/browse/featured-playlists",{params:t});case 4:return a=n.sent,n.next=7,Object(b.b)({type:m.playlist.index.SUCCESS,payload:a.data});case 7:n.next=17;break;case 9:if(n.prev=9,n.t0=n.catch(1),401!==n.t0.response.status){n.next=17;break}return n.next=14,Object(b.b)({type:m.playlist.FAILURE});case 14:return n.next=16,localStorage.getItem(v)?localStorage.removeItem(v):null;case 16:window.location="/";case 17:case"end":return n.stop()}}),S,null,[[1,9]])}function k(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)([Object(b.c)(m.playlist.index.REQUEST,I)]);case 2:case"end":return e.stop()}}),w)}var C=E.a.mark(N);function N(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)([k()]);case 2:case"end":return e.stop()}}),C)}var U=Object(s.a)(),L=Object(i.e)(f,Object(i.a)(U));U.run(N);var D=a(68),R=a(15),z=a(182),B=a(181),T=a(194),_=a(179),A=a(60),P=a.n(A),W=a(177),M=Object(W.a)((function(e){return{title:{color:"#333",fontWeight:600}}})),F=function(e){var t=e.direction,a=M();return r.a.createElement(T.a,{display:"flex",flexDirection:t,alignItems:"center"},r.a.createElement(_.a,{fontSize:"large"},r.a.createElement(P.a,{fontSize:"large",color:"error"})),r.a.createElement(B.a,{variant:"h4",className:a.title},"Spotifood"))},H=Object(W.a)((function(e){return{root:{display:"flex",height:"100vh"},btn_singin:{fontSize:"16px",lineHeight:"1",borderRadius:"500px",padding:"19px 56px 21px",background:"#1DB954",color:"#fff","&:hover":{background:"#1ED760"}}}})),J=function(){var e=H(),t=Object(R.f)();return Object(n.useEffect)((function(){var e,a=window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e}),{});a.access_token&&(e=a,localStorage.setItem(v,JSON.stringify(e)),t.push("/home"))}),[t]),Object(n.useEffect)((function(){j()&&t.push("/home")}),[t]),r.a.createElement("div",{className:e.root},r.a.createElement(z.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0},r.a.createElement(F,{direction:"column"})),r.a.createElement(z.a,{item:!0},r.a.createElement(B.a,{variant:"h6"},"Encontre aqui aquela a playlist ideal para o seu dia.")),r.a.createElement(z.a,{item:!0},r.a.createElement(T.a,{mt:5},r.a.createElement("a",{className:e.btn_singin,href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("3579712af8ae42d1959b4a1df703730c","&redirect_uri=").concat("http://localhost:3000","&response_type=").concat("token")},"Entrar com conta spotify")))))},Q=a(35),q=a(189),Y=a(190),G=a(191),X=a(184),V=a(197),K=a(198),Z=a(93),$=a.n(Z),ee=a(49),te=a(199),ae=a(193),ne=a(195),re=Object(W.a)((function(e){return{root:{display:"flex",flexDirection:"column",padding:10,"& .MuiFormControl-root":{marginBottom:"1rem"}}}})),ce=a(192),oe=function(e){var t=e.onFilters,a=e.filters,c=re(),o=Object(n.useState)(null),l=Object(Q.a)(o,2),i=l[0],s=l[1],u=Object(n.useState)(null),m=Object(Q.a)(u,2),p=m[0],f=m[1],d=Object(ce.a)(new Date,"yyyy-MM-dd'T'HH:mm");return Object(n.useEffect)((function(){Object(g.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("/5a25fade2e0000213aa90776");case 2:t=e.sent,(a=t.data).filters.map((function(e,t){return s((function(e){return a.filters[0].values})),f((function(e){return a.filters[1].values})),!0}));case 5:case"end":return e.stop()}}),e)})))()}),[]),r.a.createElement("div",{className:c.root},r.a.createElement("form",null,r.a.createElement(te.a,{fullWidth:!0},r.a.createElement(ne.a,{id:"locale",disableClearable:!0,options:i||[],size:"small",getOptionLabel:function(e){return e.name},onChange:function(e,n){return t(Object.assign(Object(ee.a)({},a,{locale:n.value})))},renderInput:function(e){return r.a.createElement(ae.a,Object.assign({},e,{label:"Idioma",variant:"outlined",color:"secondary"}))}})),r.a.createElement(te.a,{fullWidth:!0},r.a.createElement(ne.a,{id:"country",disableClearable:!0,options:p||[],size:"small",getOptionLabel:function(e){return e.name},onChange:function(e,n){return t(Object.assign(Object(ee.a)({},a,{country:n.value})))},renderInput:function(e){return r.a.createElement(ae.a,Object.assign({},e,{label:"Pa\xeds",variant:"outlined",color:"secondary"}))}})),r.a.createElement(te.a,{fullWidth:!0},r.a.createElement(ae.a,{id:"timestamp",color:"secondary",label:"Data e Hor\xe1rio",type:"datetime-local",variant:"outlined",size:"small",fullWidth:!0,defaultValue:d,onChange:function(e){return t(Object.assign(Object(ee.a)({},a,{timestamp:Object(ce.a)(new Date(e.target.value),"yyyy-MM-dd'T'HH:mm:ss")})))}})),r.a.createElement(te.a,{fullWidth:!0},r.a.createElement(ae.a,{id:"offset",name:"offset",label:"P\xe1gina",color:"secondary",variant:"outlined",size:"small",fullWidth:!0,type:"number",onChange:function(e){return t(Object.assign(Object(ee.a)({},a,{offset:e.target.value||1})))}})),r.a.createElement(te.a,{fullWidth:!0},r.a.createElement(ae.a,{id:"limit",name:"limit",color:"secondary",label:"Quantidade",variant:"outlined",size:"small",fullWidth:!0,type:"number",inputProps:{min:1,max:50},onChange:function(e){return t(Object.assign(Object(ee.a)({},a,{limit:e.target.value||12})))}}))))},le=function(e){return{type:m.playlist.index.REQUEST,payload:e}},ie=a(185),se=a(186),ue=a(187),me=a(188),pe=a(40),fe=Object(W.a)((function(e){return{root:Object(pe.a)({display:"flex",flexDirection:"column"},e.breakpoints.down("sm"),{"& .MuiGrid-container":{justifyContent:"center"}}),title:{color:"#333",fontWeight:600},card:{width:320,height:450},media:{height:320}}})),de=function(e){var t=e.filters,a=fe(),c=Object(l.c)((function(e){return e.playlist})),o=Object(l.b)(),i=Object(n.useState)([]),s=Object(Q.a)(i,2),u=s[0],m=s[1],p=Object(n.useState)(t),f=Object(Q.a)(p,2),d=f[0],E=f[1];Object(n.useEffect)((function(){c.success&&JSON.stringify(d)===JSON.stringify(t)||o(le(t));var e=setInterval((function(){o(le(t))}),3e4);return m((function(e){return c.data})),E((function(e){return t})),function(){return clearInterval(e)}}),[o,c,t,d]);return r.a.createElement("div",{className:a.root},r.a.createElement(z.a,{component:T.a,container:!0,direction:"row",justify:"space-between",alignItems:"center",mb:4},r.a.createElement(z.a,{item:!0},r.a.createElement(B.a,{variant:"h4",gutterBottom:!0,className:a.title},"Destaques")),r.a.createElement(z.a,{item:!0},r.a.createElement(ae.a,{color:"secondary",id:"search",label:"Buscar",variant:"outlined",size:"small",type:"search",onChange:function(e){return function(e){var t=c.data.filter((function(t){return t.name.toLowerCase().indexOf(e.toLowerCase())>=0}));return m((function(e){return t}))}(e.target.value)}}))),r.a.createElement(z.a,{container:!0,justify:"flex-start",spacing:3},u.length>0&&u.map((function(e,t){return r.a.createElement(z.a,{key:t,item:!0},r.a.createElement(ie.a,{className:a.card,elevation:0},r.a.createElement(se.a,{className:a.media,image:e.images[0].url,title:"Image - ".concat(e.name)}),r.a.createElement(ue.a,null,r.a.createElement(B.a,{gutterBottom:!0,variant:"h5",component:"h2"},e.name),r.a.createElement(B.a,{variant:"body2",color:"textSecondary",component:"p"},e.description))))}))),c.loading&&r.a.createElement(T.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},r.a.createElement(me.a,{color:"secondary",size:64})),c.success&&u.length<1&&r.a.createElement(T.a,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},r.a.createElement(_.a,{fontSize:"large"},r.a.createElement(P.a,{fontSize:"large",color:"error"})),r.a.createElement(B.a,{color:"textSecondary"},"Nenhuma playlist encontrada.")))},Ee=a(94),be=a.n(Ee),ge=Object(W.a)((function(e){return{root:{display:"flex"},drawer:Object(pe.a)({},e.breakpoints.up("sm"),{width:250,flexShrink:0}),appBar:Object(pe.a)({background:"#fafafa",boxShadow:"0px 2px 4px -1px rgba(0,0,0,0.2)"},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(250,"px)"),marginLeft:250}),menuButton:Object(pe.a)({},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:250},content:{flexGrow:1,padding:e.spacing(3)}}})),ye=function(e){var t=e.window,a=ge(),c=Object(n.useState)(!1),o=Object(Q.a)(c,2),l=o[0],i=o[1],s=Object(n.useState)({locale:"pt_BR",country:"BR",offset:1,limit:6,total:0}),u=Object(Q.a)(s,2),m=u[0],p=u[1],f=function(){i(!l)},d=r.a.createElement("div",null,r.a.createElement("div",{className:a.toolbar}),r.a.createElement(F,{direction:"column"}),r.a.createElement(oe,{filters:m,onFilters:function(e){return p((function(t){return e}))}})),E=void 0!==t?function(){return t().document.body}:void 0;return r.a.createElement("div",{className:a.root},r.a.createElement(q.a,null),r.a.createElement(Y.a,{position:"fixed",className:a.appBar},r.a.createElement(G.a,null,r.a.createElement(z.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(z.a,{item:!0},r.a.createElement(X.a,{onClick:f,className:a.menuButton},r.a.createElement($.a,{color:"action"}))),r.a.createElement(z.a,{item:!0},r.a.createElement("div",{className:a.menuButton},r.a.createElement(F,{direction:"row"}))),r.a.createElement(z.a,{item:!0},r.a.createElement(X.a,{color:"inherit",disabled:!0},r.a.createElement(be.a,null)))))),r.a.createElement("nav",{className:a.drawer},r.a.createElement(V.a,{smUp:!0,implementation:"css"},r.a.createElement(K.a,{container:E,variant:"temporary",open:l,onClose:f,classes:{paper:a.drawerPaper},ModalProps:{keepMounted:!0}},d)),r.a.createElement(V.a,{xsDown:!0,implementation:"css"},r.a.createElement(K.a,{classes:{paper:a.drawerPaper},variant:"permanent",open:!0},d))),r.a.createElement("main",{className:a.content},r.a.createElement("div",{className:a.toolbar}),r.a.createElement(de,{filters:m})))},he=function(){return r.a.createElement(D.a,null,r.a.createElement(R.c,null,r.a.createElement(R.a,{path:"/",exact:!0,component:J}),r.a.createElement(R.a,{path:"/home",exact:!0,component:ye})))},ve=(a(137),a(138),function(){return r.a.createElement(l.a,{store:L},r.a.createElement(he,null))});o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ve,null)),document.getElementById("root"))}},[[107,1,2]]]);
//# sourceMappingURL=main.6a8efac1.chunk.js.map